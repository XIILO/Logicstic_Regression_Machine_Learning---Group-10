<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Approval Form</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Loan Approval Prediction</h1>
        <form id="loanForm">
            <!-- Selectbox cho các cột có lựa chọn có/không -->
            <label for="education">Education <span title="Level of education: 1 = Graduate, 0 = Not Graduate">?</span>:</label>
            <select id="education" name="education">
                <option value="1">Graduate</option>
                <option value="0">Not Graduate</option>
            </select>

            <label for="self_employed">Self Employed <span title="Employment status: 1 = Yes, 0 = No">?</span>:</label>
            <select id="self_employed" name="self_employed">
                <option value="1">Yes</option>
                <option value="0">No</option>
            </select>

            <label for="income_annum">Income (USD) <span title="Annual income of the applicant">?</span>:</label>
            <input type="text" id="income_annum" name="income_annum" placeholder="Enter amount in USD">

            <label for="loan_amount">Loan Amount (USD) <span title="Total loan amount requested">?</span>:</label>
            <input type="text" id="loan_amount" name="loan_amount" placeholder="Enter amount in USD">

            <label for="loan_term">Loan Term <span title="Term of the loan in months">?</span>:</label>
            <div class="loan-term">
                <select id="loan_year" name="loan_year">
                    <option value="0">0 Years</option>
                    <option value="1">1 Year</option>
                    <option value="2">2 Years</option>
                    <option value="3">3 Years</option>
                    <option value="4">4 Years</option>
                    <option value="5">5 Years</option>
                    <option value="6">6 Years</option>
                    <option value="7">7 Years</option>
                    <option value="8">8 Years</option>
                    <option value="9">9 Years</option>
                    <option value="10">10 Years</option>
                </select>
                <select id="loan_month" name="loan_month">
                    <option value="0">0 Months</option>
                    <option value="1">1 Month</option>
                    <option value="2">2 Months</option>
                    <option value="3">3 Months</option>
                    <option value="4">4 Months</option>
                    <option value="5">5 Months</option>
                    <option value="6">6 Months</option>
                    <option value="7">7 Months</option>
                    <option value="8">8 Months</option>
                    <option value="9">9 Months</option>
                    <option value="10">10 Months</option>
                    <option value="11">11 Months</option>
                </select>
            </div>

            <label for="cibil_score">CIBIL Score <span title="Credit score of the applicant">?</span>:</label>
            <input type="text" id="cibil_score" name="cibil_score" placeholder="Enter CIBIL score">

            <label for="residential_assets_value">Residential Assets Value (USD) <span title="Value of residential assets">?</span>:</label>
            <input type="text" id="residential_assets_value" name="residential_assets_value" placeholder="Enter value in USD">

            <label for="commercial_assets_value">Commercial Assets Value (USD) <span title="Value of commercial assets">?</span>:</label>
            <input type="text" id="commercial_assets_value" name="commercial_assets_value" placeholder="Enter value in USD">

            <label for="luxury_assets_value">Luxury Assets Value (USD) <span title="Value of luxury assets">?</span>:</label>
            <input type="text" id="luxury_assets_value" name="luxury_assets_value" placeholder="Enter value in USD">

            <label for="bank_asset_value">Bank Asset Value (USD) <span title="Value of bank assets">?</span>:</label>
            <input type="text" id="bank_asset_value" name="bank_asset_value" placeholder="Enter value in USD">

            <button type="submit">Submit</button>
        </form>

        <div class="result">
            <h2>Prediction Result</h2>
            <p id="result">Please enter the values and submit the form.</p>
        </div>
    </div>

    <script>
        // Hàm thêm dấu phân cách hàng nghìn
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Xử lý sự kiện khi người dùng nhập số
        $('input[type="text"]').on('input', function () {
            let value = $(this).val().replace(/,/g, ''); // Xóa dấu phân cách hiện tại
            if ($.isNumeric(value)) {
                $(this).val(formatNumber(value));
            }
        });

        // Xử lý sự kiện gửi form
        $('#loanForm').on('submit', function (e) {
            e.preventDefault();
            let year = $('#loan_year').val();
            let month = $('#loan_month').val();
            let totalMonths = parseInt(year) * 12 + parseInt(month);

            // Tạo dữ liệu form với số tháng
            let formData = $(this).serializeArray();
            formData.push({ name: 'loan_term', value: totalMonths });

            // Xử lý dữ liệu form và gửi yêu cầu AJAX nếu cần
            console.log(formData);
            $('#result').text('Form submitted successfully!');
        });
    </script>
</body>
</html>
